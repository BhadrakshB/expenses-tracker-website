---
import LegalLayout from "../layouts/LegalLayout.astro";
import LegalLayoutB from "../layouts/LegalLayoutB.astro";

// Server-side A/B variant
let variant = "A";
const cookieVariant = Astro.cookies.get("hero_variant")?.value;
if (cookieVariant && (cookieVariant === "A" || cookieVariant === "B")) {
  variant = cookieVariant;
}

const Layout = variant === "B" ? LegalLayoutB : LegalLayout;
---

<Layout
  title="Privacy Policy"
  description="Learn how ExpensesTracker collects, uses, and protects your personal data. Your privacy is our priority."
  lastUpdated="January 23, 2025"
  version="1.0.0"
  canonical="/privacy"
>
  <h2 id="overview">Overview</h2>
  <p>
    At ExpensesTracker, we believe your financial data is yours. This Privacy
    Policy explains what information we collect, why we collect it, and how we
    protect it. We are committed to transparency and giving you control over
    your data.
  </p>

  <div class="callout callout-success">
    <p>
      <strong>What We DON'T Do:</strong>
    </p>
    <ul>
      <li>❌ We never sell your personal data</li>
      <li>❌ We never share your financial data with advertisers</li>
      <li>❌ We never read your SMS messages for marketing</li>
      <li>❌ We never use your data to build advertising profiles</li>
    </ul>
  </div>

  <h2 id="data-collection">Data Collection</h2>

  <h3>Information You Provide</h3>
  <p>When you use the App, you may provide:</p>
  <ul>
    <li>
      <strong>Account Information:</strong> Email address, name, profile picture (optional)
    </li>
    <li>
      <strong>Financial Data:</strong> Expense entries, income records, categories,
      tags, notes
    </li>
    <li>
      <strong>Settings:</strong> Currency preferences, notification settings, theme
      choices
    </li>
  </ul>

  <h3>Information Collected Automatically</h3>
  <ul>
    <li>
      <strong>Device Information:</strong> Device type, OS version, app version
    </li>
    <li>
      <strong>Usage Data:</strong> Features used, session duration, crash reports
    </li>
    <li>
      <strong>Location:</strong> Country/region (for regional pricing only, not precise
      location)
    </li>
  </ul>

  <h3>Free vs Pro Data Collection</h3>
  <table class="data-table">
    <thead>
      <tr>
        <th>Data Type</th>
        <th>Free Plan</th>
        <th>Pro Plan</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Financial data</td>
        <td>Stored locally only</td>
        <td>Synced to secure cloud</td>
      </tr>
      <tr>
        <td>Analytics</td>
        <td>Basic (anonymous)</td>
        <td>Basic (anonymous)</td>
      </tr>
      <tr>
        <td>AI processing</td>
        <td>Not available</td>
        <td>Anonymized for insights</td>
      </tr>
    </tbody>
  </table>

  <h2 id="sms-permissions">SMS Permissions (Android)</h2>
  <p>
    If you enable SMS tracking (Pro feature), we access your SMS messages to:
  </p>
  <ul>
    <li>Detect transaction notifications from banks</li>
    <li>Auto-create expense/income entries</li>
    <li>Extract transaction amounts, dates, and merchant names</li>
  </ul>

  <div class="callout">
    <p>
      <strong>How SMS Processing Works:</strong><br />
      All SMS processing happens <em>on your device</em>. We do not upload,
      store, or transmit your SMS content to our servers. Only the extracted
      transaction data (amount, date, category) is stored.
    </p>
  </div>

  <p>
    You can disable SMS tracking at any time in Settings → Privacy → SMS
    Tracking.
  </p>

  <h2 id="ai-usage">AI & Data Processing</h2>
  <p>
    Pro users have access to AI-powered insights. Here's how we handle your
    data:
  </p>
  <ul>
    <li>
      <strong>Anonymization:</strong> Before processing, all personal identifiers
      are removed
    </li>
    <li>
      <strong>Processing:</strong> Transactions are analyzed to identify patterns
      and provide recommendations
    </li>
    <li>
      <strong>No Training:</strong> Your data is never used to train general AI models
    </li>
    <li>
      <strong>Local Processing:</strong> When possible, we use on-device ML for privacy
    </li>
  </ul>
  <p>
    AI insights are optional and can be disabled in Settings → Privacy → AI
    Insights.
  </p>

  <h2 id="data-security">Data Security</h2>
  <p>We implement industry-standard security measures to protect your data:</p>
  <ul>
    <li>
      <strong>Encryption in Transit:</strong> TLS 1.3 for all network communications
    </li>
    <li>
      <strong>Encryption at Rest:</strong> AES-256 encryption for stored data
    </li>
    <li>
      <strong>Access Controls:</strong> Role-based access with audit logging
    </li>
    <li>
      <strong>Regular Audits:</strong> Annual third-party security assessments
    </li>
    <li>
      <strong>Secure Infrastructure:</strong> Hosted on Google Cloud with SOC 2 certification
    </li>
  </ul>

  <h3>Your Security Responsibilities</h3>
  <ul>
    <li>Use a strong, unique password</li>
    <li>Enable biometric authentication</li>
    <li>Keep your device OS updated</li>
    <li>Report suspicious activity immediately</li>
  </ul>

  <h2 id="third-party">Third-Party Services</h2>
  <p>
    We use the following third-party services, each with their own privacy
    policies:
  </p>
  <ul>
    <li>
      <strong>Google Firebase:</strong> Authentication, crash reporting — <a
        href="https://firebase.google.com/support/privacy"
        target="_blank"
        rel="noopener">Privacy Policy</a
      >
    </li>
    <li>
      <strong>RevenueCat:</strong> Subscription management — <a
        href="https://www.revenuecat.com/privacy"
        target="_blank"
        rel="noopener">Privacy Policy</a
      >
    </li>
    <li>
      <strong>Sentry:</strong> Error tracking — <a
        href="https://sentry.io/privacy/"
        target="_blank"
        rel="noopener">Privacy Policy</a
      >
    </li>
  </ul>

  <h2 id="gdpr-ccpa">Your Rights (GDPR & CCPA)</h2>
  <p>Depending on your location, you may have the following rights:</p>

  <h3>For All Users</h3>
  <ul>
    <li><strong>Access:</strong> Request a copy of your data</li>
    <li><strong>Correction:</strong> Update inaccurate information</li>
    <li>
      <strong>Deletion:</strong> Request deletion of your account and data
    </li>
    <li><strong>Export:</strong> Download your data in CSV/PDF format</li>
  </ul>

  <h3>Additional Rights (EU/UK - GDPR)</h3>
  <ul>
    <li>Right to restrict processing</li>
    <li>Right to data portability</li>
    <li>Right to object to processing</li>
    <li>Right to withdraw consent</li>
  </ul>

  <h3>Additional Rights (California - CCPA)</h3>
  <ul>
    <li>Right to know what data is collected</li>
    <li>Right to opt-out of data sales (we don't sell data)</li>
    <li>Right to non-discrimination</li>
  </ul>

  <p>
    To exercise your rights, email <a href="mailto:privacy@expensestracker.app"
      >privacy@expensestracker.app</a
    >
    or use the in-app Settings → Privacy menu.
  </p>

  <h2 id="children">Children's Privacy</h2>
  <p>
    ExpensesTracker is intended for users aged 18 and older. We do not knowingly
    collect personal information from children under 18. If you believe a child
    has provided us with personal data, please contact us immediately.
  </p>
  <p>
    Family Sharing allows adult account holders to share with family members,
    but the primary account holder remains responsible for all data and usage.
  </p>

  <h2 id="data-retention">Data Retention</h2>
  <ul>
    <li>
      <strong>Active Accounts:</strong> Data retained as long as your account is active
    </li>
    <li>
      <strong>Deleted Accounts:</strong> Data deleted within 30 days of deletion request
    </li>
    <li>
      <strong>Inactive Accounts:</strong> Accounts inactive for 2+ years may be deleted
      after notification
    </li>
    <li>
      <strong>Legal Requirements:</strong> Some data may be retained longer if required
      by law
    </li>
  </ul>

  <h2 id="international">International Data Transfers</h2>
  <p>
    Your data may be transferred to and processed in countries outside your
    residence. We ensure appropriate safeguards are in place, including:
  </p>
  <ul>
    <li>Standard Contractual Clauses (EU-approved)</li>
    <li>Data Processing Agreements with all vendors</li>
    <li>Compliance with applicable data protection laws</li>
  </ul>

  <h2 id="changes">Policy Changes</h2>
  <p>
    We may update this Privacy Policy periodically. We will notify you of
    material changes via:
  </p>
  <ul>
    <li>Email notification (if you have an account)</li>
    <li>In-app notification</li>
    <li>Updated "Last Updated" date on this page</li>
  </ul>
  <p>
    Continued use after changes constitutes acceptance. We encourage you to
    review this policy regularly.
  </p>

  <h2 id="contact">Contact Us</h2>
  <p>For privacy-related questions or to exercise your rights:</p>
  <ul>
    <li>
      <strong>Email:</strong>
      <a href="mailto:privacy@expensestracker.app"
        >privacy@expensestracker.app</a
      >
    </li>
    <li><strong>Data Protection Officer:</strong> dpo@expensestracker.app</li>
    <li><strong>Address:</strong> ExpensesTracker, Bangalore, India 560001</li>
  </ul>
  <p>We aim to respond to all requests within 30 days.</p>
</Layout>

<style>
  .data-table {
    width: 100%;
    border-collapse: collapse;
    margin: 1.5rem 0;
    border: 2px solid var(--text-muted, #e5e5e7);
    border-radius: 8px;
    overflow: hidden;
  }

  .data-table th,
  .data-table td {
    padding: 0.75rem 1rem;
    text-align: left;
    border-bottom: 1px solid var(--background-tertiary, #e5e5e7);
  }

  .data-table th {
    background: var(--background-tertiary, #f5f5f7);
    font-family:
      "Inter",
      -apple-system,
      system-ui,
      sans-serif;
    font-weight: 700;
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--text-primary, #1d1d1f);
  }

  .data-table td {
    color: var(--text-secondary, #86868b);
    font-size: 0.9375rem;
  }
</style>
